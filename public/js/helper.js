
function getFlags($code) {
    $code = strtoupper($code);
    if ($code == 'AD') return 'ðŸ‡¦ðŸ‡©';
    if ($code == 'AE') return 'ðŸ‡¦ðŸ‡ª';
    if ($code == 'AF') return 'ðŸ‡¦ðŸ‡«';
    if ($code == 'AG') return 'ðŸ‡¦ðŸ‡¬';
    if ($code == 'AI') return 'ðŸ‡¦ðŸ‡®';
    if ($code == 'AL') return 'ðŸ‡¦ðŸ‡±';
    if ($code == 'AM') return 'ðŸ‡¦ðŸ‡²';
    if ($code == 'AO') return 'ðŸ‡¦ðŸ‡´';
    if ($code == 'AQ') return 'ðŸ‡¦ðŸ‡¶';
    if ($code == 'AR') return 'ðŸ‡¦ðŸ‡·';
    if ($code == 'AS') return 'ðŸ‡¦ðŸ‡¸';
    if ($code == 'AT') return 'ðŸ‡¦ðŸ‡¹';
    if ($code == 'AU') return 'ðŸ‡¦ðŸ‡º';
    if ($code == 'AW') return 'ðŸ‡¦ðŸ‡¼';
    if ($code == 'AX') return 'ðŸ‡¦ðŸ‡½';
    if ($code == 'AZ') return 'ðŸ‡¦ðŸ‡¿';
    if ($code == 'BA') return 'ðŸ‡§ðŸ‡¦';
    if ($code == 'BB') return 'ðŸ‡§ðŸ‡§';
    if ($code == 'BD') return 'ðŸ‡§ðŸ‡©';
    if ($code == 'BE') return 'ðŸ‡§ðŸ‡ª';
    if ($code == 'BF') return 'ðŸ‡§ðŸ‡«';
    if ($code == 'BG') return 'ðŸ‡§ðŸ‡¬';
    if ($code == 'BH') return 'ðŸ‡§ðŸ‡­';
    if ($code == 'BI') return 'ðŸ‡§ðŸ‡®';
    if ($code == 'BJ') return 'ðŸ‡§ðŸ‡¯';
    if ($code == 'BL') return 'ðŸ‡§ðŸ‡±';
    if ($code == 'BM') return 'ðŸ‡§ðŸ‡²';
    if ($code == 'BN') return 'ðŸ‡§ðŸ‡³';
    if ($code == 'BO') return 'ðŸ‡§ðŸ‡´';
    if ($code == 'BQ') return 'ðŸ‡§ðŸ‡¶';
    if ($code == 'BR') return 'ðŸ‡§ðŸ‡·';
    if ($code == 'BS') return 'ðŸ‡§ðŸ‡¸';
    if ($code == 'BT') return 'ðŸ‡§ðŸ‡¹';
    if ($code == 'BV') return 'ðŸ‡§ðŸ‡»';
    if ($code == 'BW') return 'ðŸ‡§ðŸ‡¼';
    if ($code == 'BY') return 'ðŸ‡§ðŸ‡¾';
    if ($code == 'BZ') return 'ðŸ‡§ðŸ‡¿';
    if ($code == 'CA') return 'ðŸ‡¨ðŸ‡¦';
    if ($code == 'CC') return 'ðŸ‡¨ðŸ‡¨';
    if ($code == 'CD') return 'ðŸ‡¨ðŸ‡©';
    if ($code == 'CF') return 'ðŸ‡¨ðŸ‡«';
    if ($code == 'CG') return 'ðŸ‡¨ðŸ‡¬';
    if ($code == 'CH') return 'ðŸ‡¨ðŸ‡­';
    if ($code == 'CI') return 'ðŸ‡¨ðŸ‡®';
    if ($code == 'CK') return 'ðŸ‡¨ðŸ‡°';
    if ($code == 'CL') return 'ðŸ‡¨ðŸ‡±';
    if ($code == 'CM') return 'ðŸ‡¨ðŸ‡²';
    if ($code == 'CN') return 'ðŸ‡¨ðŸ‡³';
    if ($code == 'CO') return 'ðŸ‡¨ðŸ‡´';
    if ($code == 'CR') return 'ðŸ‡¨ðŸ‡·';
    if ($code == 'CU') return 'ðŸ‡¨ðŸ‡º';
    if ($code == 'CV') return 'ðŸ‡¨ðŸ‡»';
    if ($code == 'CW') return 'ðŸ‡¨ðŸ‡¼';
    if ($code == 'CX') return 'ðŸ‡¨ðŸ‡½';
    if ($code == 'CY') return 'ðŸ‡¨ðŸ‡¾';
    if ($code == 'CZ') return 'ðŸ‡¨ðŸ‡¿';
    if ($code == 'DE') return 'ðŸ‡©ðŸ‡ª';
    if ($code == 'DJ') return 'ðŸ‡©ðŸ‡¯';
    if ($code == 'DK') return 'ðŸ‡©ðŸ‡°';
    if ($code == 'DM') return 'ðŸ‡©ðŸ‡²';
    if ($code == 'DO') return 'ðŸ‡©ðŸ‡´';
    if ($code == 'DZ') return 'ðŸ‡©ðŸ‡¿';
    if ($code == 'EC') return 'ðŸ‡ªðŸ‡¨';
    if ($code == 'EE') return 'ðŸ‡ªðŸ‡ª';
    if ($code == 'EG') return 'ðŸ‡ªðŸ‡¬';
    if ($code == 'EH') return 'ðŸ‡ªðŸ‡­';
    if ($code == 'ER') return 'ðŸ‡ªðŸ‡·';
    if ($code == 'ES') return 'ðŸ‡ªðŸ‡¸';
    if ($code == 'ET') return 'ðŸ‡ªðŸ‡¹';
    if ($code == 'FI') return 'ðŸ‡«ðŸ‡®';
    if ($code == 'FJ') return 'ðŸ‡«ðŸ‡¯';
    if ($code == 'FK') return 'ðŸ‡«ðŸ‡°';
    if ($code == 'FM') return 'ðŸ‡«ðŸ‡²';
    if ($code == 'FO') return 'ðŸ‡«ðŸ‡´';
    if ($code == 'FR') return 'ðŸ‡«ðŸ‡·';
    if ($code == 'GA') return 'ðŸ‡¬ðŸ‡¦';
    if ($code == 'GB') return 'ðŸ‡¬ðŸ‡§';
    if ($code == 'GD') return 'ðŸ‡¬ðŸ‡©';
    if ($code == 'GE') return 'ðŸ‡¬ðŸ‡ª';
    if ($code == 'GF') return 'ðŸ‡¬ðŸ‡«';
    if ($code == 'GG') return 'ðŸ‡¬ðŸ‡¬';
    if ($code == 'GH') return 'ðŸ‡¬ðŸ‡­';
    if ($code == 'GI') return 'ðŸ‡¬ðŸ‡®';
    if ($code == 'GL') return 'ðŸ‡¬ðŸ‡±';
    if ($code == 'GM') return 'ðŸ‡¬ðŸ‡²';
    if ($code == 'GN') return 'ðŸ‡¬ðŸ‡³';
    if ($code == 'GP') return 'ðŸ‡¬ðŸ‡µ';
    if ($code == 'GQ') return 'ðŸ‡¬ðŸ‡¶';
    if ($code == 'GR') return 'ðŸ‡¬ðŸ‡·';
    if ($code == 'GS') return 'ðŸ‡¬ðŸ‡¸';
    if ($code == 'GT') return 'ðŸ‡¬ðŸ‡¹';
    if ($code == 'GU') return 'ðŸ‡¬ðŸ‡º';
    if ($code == 'GW') return 'ðŸ‡¬ðŸ‡¼';
    if ($code == 'GY') return 'ðŸ‡¬ðŸ‡¾';
    if ($code == 'HK') return 'ðŸ‡­ðŸ‡°';
    if ($code == 'HM') return 'ðŸ‡­ðŸ‡²';
    if ($code == 'HN') return 'ðŸ‡­ðŸ‡³';
    if ($code == 'HR') return 'ðŸ‡­ðŸ‡·';
    if ($code == 'HT') return 'ðŸ‡­ðŸ‡¹';
    if ($code == 'HU') return 'ðŸ‡­ðŸ‡º';
    if ($code == 'ID') return 'ðŸ‡®ðŸ‡©';
    if ($code == 'IE') return 'ðŸ‡®ðŸ‡ª';
    if ($code == 'IL') return 'ðŸ‡®ðŸ‡±';
    if ($code == 'IM') return 'ðŸ‡®ðŸ‡²';
    if ($code == 'IN') return 'ðŸ‡®ðŸ‡³';
    if ($code == 'IO') return 'ðŸ‡®ðŸ‡´';
    if ($code == 'IQ') return 'ðŸ‡®ðŸ‡¶';
    if ($code == 'IR') return 'ðŸ‡®ðŸ‡·';
    if ($code == 'IS') return 'ðŸ‡®ðŸ‡¸';
    if ($code == 'IT') return 'ðŸ‡®ðŸ‡¹';
    if ($code == 'JE') return 'ðŸ‡¯ðŸ‡ª';
    if ($code == 'JM') return 'ðŸ‡¯ðŸ‡²';
    if ($code == 'JO') return 'ðŸ‡¯ðŸ‡´';
    if ($code == 'JP') return 'ðŸ‡¯ðŸ‡µ';
    if ($code == 'KE') return 'ðŸ‡°ðŸ‡ª';
    if ($code == 'KG') return 'ðŸ‡°ðŸ‡¬';
    if ($code == 'KH') return 'ðŸ‡°ðŸ‡­';
    if ($code == 'KI') return 'ðŸ‡°ðŸ‡®';
    if ($code == 'KM') return 'ðŸ‡°ðŸ‡²';
    if ($code == 'KN') return 'ðŸ‡°ðŸ‡³';
    if ($code == 'KP') return 'ðŸ‡°ðŸ‡µ';
    if ($code == 'KR') return 'ðŸ‡°ðŸ‡·';
    if ($code == 'KW') return 'ðŸ‡°ðŸ‡¼';
    if ($code == 'KY') return 'ðŸ‡°ðŸ‡¾';
    if ($code == 'KZ') return 'ðŸ‡°ðŸ‡¿';
    if ($code == 'LA') return 'ðŸ‡±ðŸ‡¦';
    if ($code == 'LB') return 'ðŸ‡±ðŸ‡§';
    if ($code == 'LC') return 'ðŸ‡±ðŸ‡¨';
    if ($code == 'LI') return 'ðŸ‡±ðŸ‡®';
    if ($code == 'LK') return 'ðŸ‡±ðŸ‡°';
    if ($code == 'LR') return 'ðŸ‡±ðŸ‡·';
    if ($code == 'LS') return 'ðŸ‡±ðŸ‡¸';
    if ($code == 'LT') return 'ðŸ‡±ðŸ‡¹';
    if ($code == 'LU') return 'ðŸ‡±ðŸ‡º';
    if ($code == 'LV') return 'ðŸ‡±ðŸ‡»';
    if ($code == 'LY') return 'ðŸ‡±ðŸ‡¾';
    if ($code == 'MA') return 'ðŸ‡²ðŸ‡¦';
    if ($code == 'MC') return 'ðŸ‡²ðŸ‡¨';
    if ($code == 'MD') return 'ðŸ‡²ðŸ‡©';
    if ($code == 'ME') return 'ðŸ‡²ðŸ‡ª';
    if ($code == 'MF') return 'ðŸ‡²ðŸ‡«';
    if ($code == 'MG') return 'ðŸ‡²ðŸ‡¬';
    if ($code == 'MH') return 'ðŸ‡²ðŸ‡­';
    if ($code == 'MK') return 'ðŸ‡²ðŸ‡°';
    if ($code == 'ML') return 'ðŸ‡²ðŸ‡±';
    if ($code == 'MM') return 'ðŸ‡²ðŸ‡²';
    if ($code == 'MN') return 'ðŸ‡²ðŸ‡³';
    if ($code == 'MO') return 'ðŸ‡²ðŸ‡´';
    if ($code == 'MP') return 'ðŸ‡²ðŸ‡µ';
    if ($code == 'MQ') return 'ðŸ‡²ðŸ‡¶';
    if ($code == 'MR') return 'ðŸ‡²ðŸ‡·';
    if ($code == 'MS') return 'ðŸ‡²ðŸ‡¸';
    if ($code == 'MT') return 'ðŸ‡²ðŸ‡¹';
    if ($code == 'MU') return 'ðŸ‡²ðŸ‡º';
    if ($code == 'MV') return 'ðŸ‡²ðŸ‡»';
    if ($code == 'MW') return 'ðŸ‡²ðŸ‡¼';
    if ($code == 'MX') return 'ðŸ‡²ðŸ‡½';
    if ($code == 'MY') return 'ðŸ‡²ðŸ‡¾';
    if ($code == 'MZ') return 'ðŸ‡²ðŸ‡¿';
    if ($code == 'NA') return 'ðŸ‡³ðŸ‡¦';
    if ($code == 'NC') return 'ðŸ‡³ðŸ‡¨';
    if ($code == 'NE') return 'ðŸ‡³ðŸ‡ª';
    if ($code == 'NF') return 'ðŸ‡³ðŸ‡«';
    if ($code == 'NG') return 'ðŸ‡³ðŸ‡¬';
    if ($code == 'NI') return 'ðŸ‡³ðŸ‡®';
    if ($code == 'NL') return 'ðŸ‡³ðŸ‡±';
    if ($code == 'NO') return 'ðŸ‡³ðŸ‡´';
    if ($code == 'NP') return 'ðŸ‡³ðŸ‡µ';
    if ($code == 'NR') return 'ðŸ‡³ðŸ‡·';
    if ($code == 'NU') return 'ðŸ‡³ðŸ‡º';
    if ($code == 'NZ') return 'ðŸ‡³ðŸ‡¿';
    if ($code == 'OM') return 'ðŸ‡´ðŸ‡²';
    if ($code == 'PA') return 'ðŸ‡µðŸ‡¦';
    if ($code == 'PE') return 'ðŸ‡µðŸ‡ª';
    if ($code == 'PF') return 'ðŸ‡µðŸ‡«';
    if ($code == 'PG') return 'ðŸ‡µðŸ‡¬';
    if ($code == 'PH') return 'ðŸ‡µðŸ‡­';
    if ($code == 'PK') return 'ðŸ‡µðŸ‡°';
    if ($code == 'PL') return 'ðŸ‡µðŸ‡±';
    if ($code == 'PM') return 'ðŸ‡µðŸ‡²';
    if ($code == 'PN') return 'ðŸ‡µðŸ‡³';
    if ($code == 'PR') return 'ðŸ‡µðŸ‡·';
    if ($code == 'PS') return 'ðŸ‡µðŸ‡¸';
    if ($code == 'PT') return 'ðŸ‡µðŸ‡¹';
    if ($code == 'PW') return 'ðŸ‡µðŸ‡¼';
    if ($code == 'PY') return 'ðŸ‡µðŸ‡¾';
    if ($code == 'QA') return 'ðŸ‡¶ðŸ‡¦';
    if ($code == 'RE') return 'ðŸ‡·ðŸ‡ª';
    if ($code == 'RO') return 'ðŸ‡·ðŸ‡´';
    if ($code == 'RS') return 'ðŸ‡·ðŸ‡¸';
    if ($code == 'RU') return 'ðŸ‡·ðŸ‡º';
    if ($code == 'RW') return 'ðŸ‡·ðŸ‡¼';
    if ($code == 'SA') return 'ðŸ‡¸ðŸ‡¦';
    if ($code == 'SB') return 'ðŸ‡¸ðŸ‡§';
    if ($code == 'SC') return 'ðŸ‡¸ðŸ‡¨';
    if ($code == 'SD') return 'ðŸ‡¸ðŸ‡©';
    if ($code == 'SE') return 'ðŸ‡¸ðŸ‡ª';
    if ($code == 'SG') return 'ðŸ‡¸ðŸ‡¬';
    if ($code == 'SH') return 'ðŸ‡¸ðŸ‡­';
    if ($code == 'SI') return 'ðŸ‡¸ðŸ‡®';
    if ($code == 'SJ') return 'ðŸ‡¸ðŸ‡¯';
    if ($code == 'SK') return 'ðŸ‡¸ðŸ‡°';
    if ($code == 'SL') return 'ðŸ‡¸ðŸ‡±';
    if ($code == 'SM') return 'ðŸ‡¸ðŸ‡²';
    if ($code == 'SN') return 'ðŸ‡¸ðŸ‡³';
    if ($code == 'SO') return 'ðŸ‡¸ðŸ‡´';
    if ($code == 'SR') return 'ðŸ‡¸ðŸ‡·';
    if ($code == 'SS') return 'ðŸ‡¸ðŸ‡¸';
    if ($code == 'ST') return 'ðŸ‡¸ðŸ‡¹';
    if ($code == 'SV') return 'ðŸ‡¸ðŸ‡»';
    if ($code == 'SX') return 'ðŸ‡¸ðŸ‡½';
    if ($code == 'SY') return 'ðŸ‡¸ðŸ‡¾';
    if ($code == 'SZ') return 'ðŸ‡¸ðŸ‡¿';
    if ($code == 'TC') return 'ðŸ‡¹ðŸ‡¨';
    if ($code == 'TD') return 'ðŸ‡¹ðŸ‡©';
    if ($code == 'TF') return 'ðŸ‡¹ðŸ‡«';
    if ($code == 'TG') return 'ðŸ‡¹ðŸ‡¬';
    if ($code == 'TH') return 'ðŸ‡¹ðŸ‡­';
    if ($code == 'TJ') return 'ðŸ‡¹ðŸ‡¯';
    if ($code == 'TK') return 'ðŸ‡¹ðŸ‡°';
    if ($code == 'TL') return 'ðŸ‡¹ðŸ‡±';
    if ($code == 'TM') return 'ðŸ‡¹ðŸ‡²';
    if ($code == 'TN') return 'ðŸ‡¹ðŸ‡³';
    if ($code == 'TO') return 'ðŸ‡¹ðŸ‡´';
    if ($code == 'TR') return 'ðŸ‡¹ðŸ‡·';
    if ($code == 'TT') return 'ðŸ‡¹ðŸ‡¹';
    if ($code == 'TV') return 'ðŸ‡¹ðŸ‡»';
    if ($code == 'TW') return 'ðŸ‡¹ðŸ‡¼';
    if ($code == 'TZ') return 'ðŸ‡¹ðŸ‡¿';
    if ($code == 'UA') return 'ðŸ‡ºðŸ‡¦';
    if ($code == 'UG') return 'ðŸ‡ºðŸ‡¬';
    if ($code == 'UM') return 'ðŸ‡ºðŸ‡²';
    if ($code == 'US') return 'ðŸ‡ºðŸ‡¸';
    if ($code == 'UY') return 'ðŸ‡ºðŸ‡¾';
    if ($code == 'UZ') return 'ðŸ‡ºðŸ‡¿';
    if ($code == 'VA') return 'ðŸ‡»ðŸ‡¦';
    if ($code == 'VC') return 'ðŸ‡»ðŸ‡¨';
    if ($code == 'VE') return 'ðŸ‡»ðŸ‡ª';
    if ($code == 'VG') return 'ðŸ‡»ðŸ‡¬';
    if ($code == 'VI') return 'ðŸ‡»ðŸ‡®';
    if ($code == 'VN') return 'ðŸ‡»ðŸ‡³';
    if ($code == 'VU') return 'ðŸ‡»ðŸ‡º';
    if ($code == 'WF') return 'ðŸ‡¼ðŸ‡«';
    if ($code == 'WS') return 'ðŸ‡¼ðŸ‡¸';
    if ($code == 'XK') return 'ðŸ‡½ðŸ‡°';
    if ($code == 'YE') return 'ðŸ‡¾ðŸ‡ª';
    if ($code == 'YT') return 'ðŸ‡¾ðŸ‡¹';
    if ($code == 'ZA') return 'ðŸ‡¿ðŸ‡¦';
    if ($code == 'ZM') return 'ðŸ‡¿ðŸ‡²';
    return 'ðŸ³';
}
/**
 * Get the flag emoji for the country
 * @link https://dev.to/jorik/country-code-to-flag-emoji-a21
 * @param  {String} countryCode The country code
 * @return {String}             The flag emoji
 */
//let Egypt = getFlagEmoji('eg'); // returns "ðŸ‡ªðŸ‡¬"
function getFlagEmoji(countryCode) {
    let codePoints = countryCode.toUpperCase().split('').map(char => 127397 + char.charCodeAt());
    return String.fromCodePoint(...codePoints);
}

/*!
 * Remove duplicate items from an array
 * (c) 2021 Chris Ferdinandi, MIT License, https://gomakethings.com
 * @param  {Array} arr The array
 * @return {Array}     A new array with duplicates removed
 */
function dedupe(arr) {
    return Array.from(new Set(arr));
}

/**
 * Get the value of a cookie
 * Source: https://gist.github.com/wpsmith/6cf23551dd140fb72ae7
 * @param  {String} name  The name of the cookie
 * @return {String}       The cookie value
 */
function getCookie(name) {
    let value = '; ' + document.cookie;
    let parts = value.split(`; ${name}=`);
    if (parts.length == 2) return parts.pop().split(';').shift();
}

/*!
 * Sanitize an HTML string
 * (c) 2021 Chris Ferdinandi, MIT License, https://gomakethings.com
 * @param  {String}          str   The HTML string to sanitize
 * @param  {Boolean}         nodes If true, returns HTML nodes instead of a string
 * @return {String|NodeList}       The sanitized string or nodes
 */
function cleanHTML(str, nodes) {

    /**
     * Convert the string to an HTML document
     * @return {Node} An HTML document
     */
    function stringToHTML() {
        let parser = new DOMParser();
        let doc = parser.parseFromString(str, 'text/html');
        return doc.body || document.createElement('body');
    }

    /**
     * Remove <script> elements
     * @param  {Node} html The HTML
     */
    function removeScripts(html) {
        let scripts = html.querySelectorAll('script');
        for (let script of scripts) {
            script.remove();
        }
    }

    /**
     * Check if the attribute is potentially dangerous
     * @param  {String}  name  The attribute name
     * @param  {String}  value The attribute value
     * @return {Boolean}       If true, the attribute is potentially dangerous
     */
    function isPossiblyDangerous(name, value) {
        let val = value.replace(/\s+/g, '').toLowerCase();
        if (['src', 'href', 'xlink:href'].includes(name)) {
            if (val.includes('javascript:') || val.includes('data:')) return true;
        }
        if (name.startsWith('on')) return true;
    }

    /**
     * Remove potentially dangerous attributes from an element
     * @param  {Node} elem The element
     */
    function removeAttributes(elem) {

        // Loop through each attribute
        // If it's dangerous, remove it
        let atts = elem.attributes;
        for (let { name, value } of atts) {
            if (!isPossiblyDangerous(name, value)) continue;
            elem.removeAttribute(name);
        }

    }

    /**
     * Remove dangerous stuff from the HTML document's nodes
     * @param  {Node} html The HTML document
     */
    function clean(html) {
        let nodes = html.children;
        for (let node of nodes) {
            removeAttributes(node);
            clean(node);
        }
    }

    // Convert the string to HTML
    let html = stringToHTML();

    // Sanitize it
    removeScripts(html);
    clean(html);

    // If the user wants HTML nodes back, return them
    // Otherwise, pass a sanitized string back
    return nodes ? html.childNodes : html.innerHTML;

}
/*!
 * Apply a CSS animation to an element
 * (c) 2021 Chris Ferdinandi, MIT License, https://gomakethings.com
 * @param  {Node}     node      The element to animate
 * @param  {String}   animation The animation class to apply
 * @param  {Function} onEnd     A callback function to run when the animation ends [optional]
 */
function animate(node, animation, onEnd = function () { }) {
    node.classList.add(animation);
    node.addEventListener('animationend', function () {
        node.classList.remove(animation);
        onEnd(node, animation);
    }, { once: true });
}

function toNumber(value) {
    return value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');
}

/**
 * Generate a secure random string using the browser crypto functions
 * @return {String} A random string
 */
function generateRandomString() {
    var array = new Uint32Array(28);
    window.crypto.getRandomValues(array);
    return Array.from(array, dec => ('0' + dec.toString(16)).substr(-2)).join('');
}

/**
 * Calculate the SHA256 hash of the input text
 * @param  {String}  plain The plaintext string
 * @return {Promise}       Resolves as a hash
 */
function sha256(plain) {
    const encoder = new TextEncoder();
    const data = encoder.encode(plain);
    return window.crypto.subtle.digest('SHA-256', data);
}

/**
 * Base64-urlencode a string
 * @param  {String} str The unencoded string
 * @return {String}     The encoded string
 */
function base64urlencode(str) {
    // Convert the ArrayBuffer to string using Uint8 array to conver to what btoa accepts.
    // btoa accepts chars only within ascii 0-255 and base64 encodes them.
    // Then convert the base64 encoded to base64url encoded
    // (replace + with -, replace / with _, trim trailing =)
    return btoa(String.fromCharCode.apply(null, new Uint8Array(str)))
        .replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '');
}

/*!
 * Get a random integer with a minimum and maximum value
 * (c) 2021 Chris Ferdinandi, MIT License, https://gomakethings.com
 * @param  {Integer} min  The minimum value
 * @param  {Integer} max  The maximum value
 * @return {Integer}      A random number
 */
function randomNumber(min = 0, max = 1000) {
    return Math.floor(Math.random() * (max - min + 1) + min);
}


/*!
 * Get the URL parameters
 * (c) 2021 Chris Ferdinandi, MIT License, https://gomakethings.com
 * @param  {String} url The URL
 * @return {Object}     The URL parameters
 */
function getParams(url = window.location) {
    let params = {};
    new URL(url).searchParams.forEach(function (val, key) {
        if (params[key] !== undefined) {
            if (!Array.isArray(params[key])) {
                params[key] = [params[key]];
            }
            params[key].push(val);
        } else {
            params[key] = val;
        }
    });
    return params;
}

/*!
 * Get the value of a query string from a URL
 * (c) 2023 Chris Ferdinandi, MIT License, https://gomakethings.com
 * @param  {String} param The parameter to get the value of
 * @param  {String} url   The URL to get the value from [optional]
 * @return {String}       The value
 */
function getParam(param, url = window.location) {
    let params = new URL(url).searchParams;
    let val = params.getAll(param);
    if (val.length > 1) return val;
    return val[0];
}

/*!
 * Convert a timestamp into a date
 * (c) 2021 Andrew Borstein (https://andrewborstein.com/) & Chris Ferdinandi (https://gomakethings.com)
 * MIT License,
 * @param  {Integer} month The month integer (1 is January)
 * @param  {Boolean}       If true, use short month names (ex. "Jan")
 * @return {Array|String}  The month, or an array of months
 */
function getMonths(month, short) {

    // Create month names
    let format = short ? 'short' : 'long';
    let monthNames = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11].map(function (mon) {
        return new Date(2000, mon).toLocaleString({}, { month: format });
    });

    // Return month name (or all of them)
    if (month) {
        return monthNames[(month - 1)];
    }
    return monthNames;

}

/*!
 * Create a random color value.
 * (c) 2021 Chris Ferdinandi, MIT License, https://gomakethings.com
 * @return {String} A random six-digit color hexcode
 */
function createColor() {

    // The available hex options
    let hex = ['a', 'b', 'c', 'd', 'e', 'f', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];

    /**
     * Randomly shuffle an array
     * https://stackoverflow.com/a/2450976/1293256
     */
    let shuffle = function () {

        let currentIndex = hex.length;
        let temporaryValue, randomIndex;

        // While there remain elements to shuffle...
        while (0 !== currentIndex) {
            // Pick a remaining element...
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex -= 1;

            // And swap it with the current element.
            temporaryValue = hex[currentIndex];
            hex[currentIndex] = hex[randomIndex];
            hex[randomIndex] = temporaryValue;
        }

    };

    /**
     * Create a six-digit hex color
     */
    let hexColor = function () {

        // Create the color
        let color = '#';

        // Shuffle the hex values and append
        for (let i = 0; i < 6; i++) {
            shuffle(hex);
            color += hex[0];
        }

        return color;

    };

    // Return the color string
    return hexColor();

}
/**
 * Encode the HTML in a user-submitted string
 * https://portswigger.net/web-security/cross-site-scripting/preventing
 * @param  {String} str  The user-submitted string
 * @return {String} str  The sanitized string
 */
function encodeHTML(str) {
    return str.replace(/data:/gi, '').replace(/javascript:/gi, '').replace(/[^\w-_. ]/gi, function (c) {
        return `&#${c.charCodeAt(0)};`;
    });
}

/*!
 * Get the contrasting color for any hex color
 * (c) 2021 Chris Ferdinandi, MIT License, https://gomakethings.com
 * Derived from work by Brian Suda, https://24ways.org/2010/calculating-color-contrast/
 * @param  {String} A hexcolor value
 * @return {String} The contrasting color (black or white)
 */
function getContrast(hexcolor) {

    // If a leading # is provided, remove it
    if (hexcolor.slice(0, 1) === '#') {
        hexcolor = hexcolor.slice(1);
    }

    // If a three-character hexcode, make six-character
    if (hexcolor.length === 3) {
        hexcolor = hexcolor.split('').map(function (hex) {
            return hex + hex;
        }).join('');
    }

    // Convert to RGB value
    let r = parseInt(hexcolor.substr(0, 2), 16);
    let g = parseInt(hexcolor.substr(2, 2), 16);
    let b = parseInt(hexcolor.substr(4, 2), 16);

    // Get YIQ ratio
    let yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;

    // Check contrast
    return (yiq >= 128) ? 'black' : 'white';
}

/*!
 * More accurately check the type of a JavaScript object
 * (c) 2021 Chris Ferdinandi, MIT License, https://gomakethings.com
 * @param  {Object} obj The object
 * @return {String}     The object type
 */
function trueTypeOf(obj) {
    return Object.prototype.toString.call(obj).slice(8, -1).toLowerCase();
}
// https://vanillajstoolkit.com/helpers/